<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Test</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        body>div{
            float: left;
            margin-top: 10px;
            margin-left: 10px;
            width: 400px;
            height: 200px;
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <div id="test1"></div>
    <div id="test2"></div>
    <div id="test3" style="width: 500px;"></div>
    <div id="test4"></div>
    <div id="test5"></div>
    <div id="test6"></div>
    <div id="test7"></div>
    <div id="test8"></div>
    <div id="test9"></div>
    <div id="test10"></div>
    <div id="test11"></div>
    <script src="JS/jquery-1.11.2.min.js"></script>
    <script src="JS/echarts.min.js"></script>
    <script src="JS/customed.js"></script>
    <script src="JS/nscharts.js"></script>
    <script>
        //相当于Object.assign()
        function assign(obj1, obj2){
            for(var key in obj2){
                obj2.hasOwnProperty(key) === true && (obj1[key] = obj2[key]);//此处hasOwnProperty是判断自有属性
            }
            return obj1;
        }
        //修复toFixed
        Number.prototype.toFixed = function(len){//修复浮点数精度丢失的引起“四舍五不入”问题(Chrome/Firefox)
            var mul = Math.pow(10, len);
            var temp = Math.round(this * mul) / mul + '';//null+''不会引起报错
            if(len !== 0){
                temp.indexOf('.') === -1 && (temp += '.');//保留小数时加小数点
                var num = temp.length - temp.indexOf('.') - 1;//获取小数点后0的个数
                for(var i = 0; i < len - num; i++){//补0
                    temp += '0';
                }
            }
            return temp;
        };
        //环形图
        $.get('data/pie.json', function(data){
            nscharts.pieChart(data, 'test1',{
                centerPosition: ['30%','50%'],
                radiusScale: ['52%','68%'],
                legendPosition: ['56%','26%'],
                textPosition: ['29%','44%'],
                text: ['各业态', '收入占比'],
				centerFontSize: 14,
                legendMaxRowNum: 4,
                tooltipUnit: '元',
                clickFn: function(result){
                    alert(result.name + '\n' + result.value + '万元 (' + result.percent + '%)');
                }
            });
        });
        //简单环形图
        $.get('data/pie.simple.json', function(data){
            nscharts.simplePieChart(data, 'test2',{
                radiusScale: ['52%','68%'],
                text: '完成率',
                tooltipText: ['','未完成项<br>1. 项目一<br>2. 项目二']
            });
        });
        //引导线环形图
        $.get('data/pie.json', function(data){
            nscharts.labelLinePieChart(data, 'test3',{
                radiusScale: ['16%','68%'],
                centerPosition: ['42%','50%'],
                legendPosition: ['83%','6%'],
                legendMaxRowNum: 7,
                tooltipUnit: '个'
            });
        });
        //柱状图
        $.get('data/bar.column.json', function(data){
            nscharts.columnChart(data, 'test4',{
                gridLeft: 10,
                gridTop: 50,
                gridRight: 30,
                gridBottom: 10,
                tooltipUnit: '万元',
                legendName: ['指标一','指标二','指标三'],
                xAxisMaxCharNum: 3,
                xAxisFilter: '城市公司',
                yAxisSplitNum: 2,
                dataZoomStyle: [0, 50, false]
            });
        });
        //柱状图(含计划)
        $.get('data/bar.column-showplan.json', function(data){
            nscharts.columnChart(data, 'test5',{
                gridLeft: 10,
                gridTop: 50,
                gridRight: 30,
                gridBottom: -10,
                tooltipUnit: '万元',
                legendName: ['计划','实际'],
                dataZoomStyle: [0, 50, false],
                showPlan: true
            });
        });
        //堆叠柱状图
        $.get('data/bar.stacked.json', function(data){
            nscharts.stackedBarChart(data, 'test6',{
                gridLeft: 10,
                gridTop: 50,
                gridRight: 30,
                gridBottom: -10,
                tooltipUnit: '万元',
                legendName: ['总营收','本年营收','往年营收']
            });
        });
        //条形图
        $.get('data/bar.column-showplan.json', function(data){
            nscharts.barChart(data, 'test7',{
                gridLeft: 10,
                gridTop: 10,
                gridRight: 50,
                gridBottom: -30,
                tooltipUnit: '万元',
                // yAxisUnit: '万元'
            });
        });
        //甘特图
        $.get('data/bar.gantt.json', function(data){
            nscharts.ganttChart(data, 'test8',{
                // scale: 3
            });
        });
        //折线图
        $.get('data/line.json', function(data){
            nscharts.lineChart(data, 'test9',{
                gridLeft: 10,
                gridTop: 50,
                gridRight: 30,
                gridBottom: 10,
                tooltipUnit: '%',
                legendName: ['X公司','Y公司']
            });
        });
        //柱状单折线
        $.get('data/bar.line.json', function(data){
            nscharts.barLineChart(data, 'test10',{
                gridLeft: 10,
                gridTop: 50,
                gridRight: 30,
                gridBottom: -10,
                legendName: ['计划', '实际'],
                tooltipUnit: '元',
                yAxisSplitNum: 2
            });
        });
        //柱状双折线
        $.get('data/line.bar.json', function(data){
            nscharts.barDoubleLineChart(data, 'test11',{
                gridLeft: 10,
                gridTop: 50,
                gridRight: 30,
                gridBottom: -10,
                legendName: ['净增长合同额','接管合同额','撤管合同额']
            });
        });
    </script>
</body>
</html>